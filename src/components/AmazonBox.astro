---
const { title, asin, price, rating = 4.5, max = 5 } = Astro.props;
const link = `https://www.amazon.de/dp/${asin}?tag=Smartrichter-21`;

const full = Math.floor(rating);
const half = rating % 1 >= 0.5 ? 1 : 0;
const empty = Math.max(0, max - full - half);
const stars = "★".repeat(full) + (half ? "☆" : "") + "☆".repeat(empty);
---

<div style="
  border:1px solid #e2e8f0;
  border-radius:12px;
  padding:16px;
  margin:16px 0;
  background:#ffffff;
  color:#111111;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
">
  <div style="display:flex;align-items:center;gap:8px;justify-content:space-between;flex-wrap:wrap;">
    <span style="
      display:inline-flex;align-items:center;gap:.4rem;
      background:#ff9900;color:#fff;padding:.22rem .6rem;border-radius:999px;
      font-size:.8rem;font-weight:700;
    ">Empfehlung</span>
    <h3 style="margin:0;font-size:1.05rem;line-height:1.3;color:#111;">{title}</h3>
  </div>

  <p style="margin:.5rem 0 .3rem 0;color:#f59e0b;font-weight:600;">
    {stars} {rating.toFixed(1)}/{max}
  </p>

  {price && (
    <p style="margin:.2rem 0 .8rem 0;">
      <span style="color:#555;">Preis:</span> <b style="color:#111;">{price}</b>
    </p>
  )}

  <a href={link} target="_blank" rel="nofollow sponsored noopener"
     style="
       display:inline-block;text-decoration:none;
       background:#232f3e;color:#fff;padding:.55rem .9rem;border-radius:10px;
       font-weight:600;
     ">
    Jetzt bei Amazon ansehen
  </a>

  <div style="margin-top:.45rem;font-size:.9rem;color:#666;">
    Hinweis: Affiliate-Link. Für dich entstehen keine Mehrkosten.
  </div>
</div>
